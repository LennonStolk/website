<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lennon Stolk's Portfolio Website</title>
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="icon" type="image/x-icon" href="img/favicon.png">
</head>

<body>

    <!-- JavaScript -->
    <script src="https://kit.fontawesome.com/1f716bedd7.js" crossorigin="anonymous"></script>
    <script src="../../js/main.js" defer></script>

    <!-- Main content -->
    <main class="main" id="main" style="background-color: #98c5ee;">

        <!-- Project title -->
        <section class="project-title-section">
            <h1 class="project-title">World Eater<span style="font-weight: normal;"> - Dialog system</span> </h1>
        </section>

        <!-- Description -->
        <section class="project-description-section">

            <h2><br><br><br>Inleiding</h2>

            <p class="project-description">
                <br>
                In World Eater speelt interactie met de speler een belangrijke rol. Om deze interactie naar een hoger niveau te tillen, 
                heb ik een flexibel en schaalbaar dialog system ontwikkeld. Dit systeem biedt ondersteuning voor branching dialogs, 
                callbacks voor custom code, afbeeldingen, geluiden en dynamische teksteffecten.
                <br><br>
                In deze blog deel ik mijn aanpak en de belangrijkste features van dit systeem. 
                Mijn focus lag op het ontwerpen van een oplossing die gebruiksvriendelijk is voor developers.
                <br><br>
            </p>

            <h2><br><br><br>Ontwerp</h2>

            <p class="project-description">
                <br>
                Het ontwerp van het dialog system is simpel en consistent gehouden, met een focus op leesbaarheid en een futuristische uitstraling die past bij het ruimtethema van de game:
                <br><br>
                    UI Design: Donkere doorzichtige achtergronden met afgeronde hoeken en contrasterende lichte tekst. Een afbeelding aan de linkerkant, tekst aan de rechterkant en interactieopties rechtsonder.
                    Interactie: Opties vergroten wanneer de muis erover beweegt om interactie intuïtief te maken.
                <br><br>
                Deze visuele keuzes zorgen niet alleen voor een prettige gebruikerservaring, maar maken het ook eenvoudig om notificaties en dialogen visueel op elkaar af te stemmen.
                <br><br>
            </p>

            <img src="img/dialogsystem1.png" alt="Plaatje van Dialog System" class="project-image" style="width: 600px;">

            <h2><br><br><br>Branching</h2>

            <p class="project-description">
                <br>
                Een van de kernfeatures is de ondersteuning voor branching dialogs. Hiermee kunnen spelers keuzes maken die invloed hebben op het verloop van het spel. Denk aan scenario's zoals een winkel waarin spelers power-ups kopen, een levelselector of een game-over-menu.
                <br><br>
                De branching werkt via een class genaamd DialogOption, waarin verschillende helper classes zoals SimpleEndDialogOption en SimpleRedirectDialogOption standaardinstellingen bieden. Dit bespaart tijd en minimaliseert foutgevoeligheid. Dankzij deze structuur kunnen developers met minimale code complexe aftakkingen bouwen.
                <br><br>
                Voorbeeld: Een dialoog waarin een speler kan kiezen:
                <br><br>
                    Doorgaan naar een nieuwe conversatie.
                    Of stoppen, waarmee de dialoog beëindigd wordt.
                <br><br>
            </p>

            <img src="img/branching.png" alt="Plaatje van Dialog System" class="project-image" style="width: 700px;">

            <h2><br><br><br>Developer experience</h2>

            <p class="project-description">
                <br>
                Een gebruiksvriendelijke developer experience (DX) stond centraal tijdens de ontwikkeling van het dialog system. Om dit te bereiken, heb ik een reeks helper classes en een duidelijke structuur opgezet:
                <br><br>
                <span style="font-weight: bold;">Classes voor snelle implementatie:</span>
                    BaseDialog: De meest flexibele klasse, geschikt voor complexe dialogen.
                    SimpleContinuingDialog en SimpleEndingDialog: Minimalistische classes voor standaarddialogen.
                <br><br>
                <span style="font-weight: bold;">Custom code support:</span>
                    Door virtual methods in BaseDialog te overriden, kunnen developers eenvoudig unieke functies toevoegen bij het starten of beëindigen van een dialoog.
                <br><br>
                <span style="font-weight: bold;">DialogSound Class:</span>
                    Geluid en muziek worden toegevoegd via Unity’s AudioSource, met parameters zoals volume, looping en bestandsnaam. Hierdoor kan elke dialoog worden verrijkt met audiofeedback.
                <br><br>
                De impact hiervan: Met deze structuur kunnen developers snel en efficiënt dialogen bouwen zonder zich bezig te houden met technische details, wat iteraties versnelt en de productiviteit van teams verhoogt.
                <br><br>
            </p>

            <img src="img/basedialog.png" alt="Plaatje van Dialog System" class="project-image" style="width: 600px;">

            <p class="project-description">
                <br>
                Hier zie je de BaseDialog class die gebruikt wordt voor alle dialogs.
                <br><br>
            </p>
            

            <h2><br><br><br>Rich text & custom effects</h2>

            <p class="project-description">
                <br>
                Unity's UI toolkit heeft support voor Rich Text, dus ik heb dit gebruikt om simpele effecten zoals 
                gekleurde en schuin-gedrukte tekst toe te voegen aan de dialog system. 
                Deze kunnen ingevoerd worden in een string door middel van tags die een beetje lijken op HTML. <br>
                Zo wordt bijvoorbeeld de onderstaande tekst omgetoverd tot "<i style="font-style: italic;">Hello</i>, <b style="font-weight: bold;">world.</b>"
                <code style="font-family: Times New Roman;"><pre>&lt;i&gt;Hello&lt;/i&gt;, &lt;b&gt;world&lt;/b&gt;</pre></code>
            </p>

            <p class="project-description">
                Maar eigenlijk wilden we nog meer effecten toevoegen aan de dialog system om de tekst meer leven te geven.
                Ik heb besloten deze effecten toe te voegen: 
                Regenboogkleurige, golvende, op en neergaande, schuddende en draaiende tekst. 
                Ten slotte heb ik ook nog wat opties om tekst groter en kleiner te maken toegevoegd als tekst effect.
            </p>

            <p class="project-description">
                Deze custom tekst effecten werden samen gevoegd in één C# enum.<br><br>
            </p>

            <img src="img/dialogtexteffects.png" alt="Plaatje van Dialog System" class="project-image" style="width: 250px;">

            <p class="project-description">
                <br>Deze enum die DialogTextEffects heet, 
                kan gebruikt worden bij het aanmaken van een nieuwe dialog om één of meer effecten toe te voegen.
                Niet alle effecten werken met elkaar vanwege de manier waarop ze achter de schermen geimplementeerd zijn, 
                veel wel.
                <br><br>
                Hieronder zie je een voorbeeld van een dialog waar een regenboog effect wordt gebruikt. 
                Het regenboog effect is een van de weinige effecten waar ook een "target" string aan toegevoegd kan worden.
                In dit geval is dat "space dust".<br><br>
            </p>
            
            <img src="img/dialogtexteffectuse.png" alt="Plaatje van Dialog System" class="project-image" style="width: 600px;">
            
            <p class="project-description">
                <br>Het resultaat van deze instellingen is een zin  met enkele regenboogkleurige woorden. Hier is een voorbeeld van een dialog uit het spel:<br><br>
            </p>

            <img src="img/Rainbow.gif" alt="Plaatje van Dialog System" class="project-image" style="width: 400px;"> 

            <p class="project-description">
                <br>De implementatie van de verschillende effecten bevinden zich in de DialogSystemUI class. 
                In de CreateDialogElement method wordt door middel van een foreach loop en een switch case bepaald welke effecten worden toegepast.<br><br>
            </p>

            <img src="img/switcheffect.png" alt="Plaatje van Dialog System" class="project-image" style="width: 700px;"> 

            <p class="project-description">
                <br>Alle effecten behalve de tekstgroottes worden toegepast door middel can Unity Coroutines die elke frame een IEnumerator functie aanroepen.
                Deze functies nemen de Label (het tekstvak) en voeren het effect met een aantal parameters er op uit.<br><br>
            </p>

            <img src="img/shakeeffect.png" alt="Plaatje van Dialog System" class="project-image" style="width: 600px;"> 

            <p class="project-description">
                <br>In dit geval wordt de positie (offset) van het tekstvak berekent door middel van willekeurige getallen,
                waardoor de speler de illusie krijgt dat de tekst schudt.
                Hieronder is het effect te zien dat de bovenstaande ShakeEffect method produceert.<br><br>
            </p>

            <img src="img/Shaking.gif" alt="Plaatje van Dialog System" class="project-image" style="width: 400px;">
            
            <h2><br><br><br>Soepel afwisselen van berichten</h2>

            <p class="project-description">
                <br>
                Om berichten soepel over te laten gaan, heb ik een fade-out en fade-in animatie toegevoegd via Unity’s UI Toolkit. Dit creëert een vloeiende overgang en geeft een visuele indicatie van het einde van een bericht, wat de immersie van de speler versterkt.
                <br><br>
                Technische uitdaging: Het balanceren van animaties en interactie zonder vertragingen voor de speler. Dit heb ik opgelost door een cooldownmechanisme te implementeren dat parallel draait aan de animaties.
                <br><br>
            </p>

            <img src="img/transition.png" alt="Plaatje van Dialog System" class="project-image" style="width: 400px;">

            <p class="project-description">
                <br>
                Dit is het einde van deze developer blog. Dankjewel voor het lezen!
                <br><br>
            </p>

        </section>

    </main>

</body>

</html>